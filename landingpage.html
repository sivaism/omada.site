<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/assets/omadalogo.svg" />

  <!-- Preconnects for font loading performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="./assets/tailwind.min.js" />

  <!-- Google Font: Inter (supports 100-900 weights) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />

  <!-- Tailwind Configs -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          screens: {
            '3xl': '1700px',
            'mobile': '360px',
            '4xl': '1900px',
          },
          colors: {
            'custom-bg': '#18181b',
          },
        },
      },
    };
  </script>

  <title>Omada AI</title>
</head>

<body class="bg-custom-bg text-white min-h-screen relative">
  <!-- background blue blur -->
  <div
    class="bg-[#3b82f6] z-30 w-60 h-80 sm:w-80 sm:h-80 md:w-[30rem] md:h-[30rem] rounded-full absolute backdrop-filter mobile:left-[23%] blur-3xl sm:blur-[100px] md:blur-[150px] top-[2%] sm:-top-[8%] sm:left-1/3 md:left-1/3 lg:left-[35%] opacity-[0.23]">
  </div>

  <!-- header -->
  <nav class="sticky w-full z-20 top-0 bg-custom-bg">
    <div class="flex items-center justify-between mx-5 md:mx-10 pt-10 pb-4">
      <a href="www.omada.site" class="flex items-center space-x-3">
        <img src="/assets/omadalogo.svg" class="h-8 w-8" alt="Omada Logo" />
        <span class="self-center text-2xl whitespace-nowrap text-white font-semibold">Omada AI</span>
      </a>
    </div>
  </nav>

  <!-- card -->
  <section class="mt-10 lg:mt-16 xl:mt-20 flex flex-col justify-center items-center text-center px-6">
    <!-- card starts invisible and will fade in from right -->
    <div id="main-card" class="border border-[#3f3f46] bg-[#3b82f6]/10 p-6 rounded-2xl max-w-xl w-full opacity-0 translate-x-10 transition-all duration-1000 ease-in">
      <div class="">
        <p class="font-semibold text-base text-center">Creating Your Marketing Blueprint</p>
        <hr class="my-5 text-[#a1a1aa]" />
      </div>

      <div id="omada-intro" class="opacity-0 hidden translate-x-10 transition-all duration-700 ease-in">
        <p class="text-start font-semibold text-sm">What Omada is doing:</p>
      </div>
      
      <ul id="omada-items" class="flex flex-col text-start gap-2.5 mt-2 list-disc pl-1 md:pl-6 text-sm">
        <!-- right transitions -->
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Analyzing your brand voice and market position
        </li>
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Identifying your ideal customer segments
        </li>
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Building your multi-channel strategy
        </li>
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Generating conversion-focused creative
        </li>
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Designing high-performance landing pages
        </li>
        <li class="omada-item hidden opacity-0 translate-x-10 transition-all duration-700 ease-in transform">
          Optimizing for maximum ROI
        </li>
      </ul>

      <!-- Summary and loader container -->
      <div class="mt-5 flex flex-col items-center">
        <!-- Summary carousel container - with overflow hidden to hide slides moving in/out -->
        <div id="summary-carousel" class="relative text-start w-full overflow-hidden transition-all duration-100 ease-in">
          <!-- Individual slides -->
          <p class="carousel-slide text-[#3b82f6] font-semibold text-sm absolute w-full transition-all duration-1000 ease-in-out" style="transform: translateX(100%); opacity: 100;">
            78% of marketers say content creation is their biggest challenge. We're automating that process for you.
          </p>
          <p class="carousel-slide text-[#3b82f6] font-semibold text-sm absolute w-full transition-all duration-1000 ease-in-out" style="transform: translateX(100%); opacity: 100;">
            Businesses that maintain brand consistency see an average revenue increase of 33%. We help you stay consistent across all channels.
          </p>
          <p class="carousel-slide text-[#3b82f6] font-semibold text-sm absolute w-full transition-all duration-1000 ease-in-out" style="transform: translateX(100%); opacity: 100;">
            Only 61% of marketers believe their marketing strategy is effective. Our AI ensures your strategy delivers results.
          </p>
          <p class="carousel-slide text-[#3b82f6] font-semibold text-sm absolute w-full transition-all duration-1000 ease-in-out" style="transform: translateX(100%); opacity: 100;">
            Social media posts with images get 2.3x more engagement. We optimize your content for maximum performance.
          </p>
          <p class="carousel-slide text-[#3b82f6] font-semibold text-sm absolute w-full transition-all duration-1000 ease-in-out" style="transform: translateX(100%); opacity: 100;">
            The average open rate for email marketing is just 21.5%. Our targeted content helps you break through the noise.
          </p>
        </div>
        
        <!-- Loader placed next to summary -->
        <div id="omada-loader" class="flex justify-center items-center ml-3 mt-3">
          <img class="w-5 h-5 animate-spin" src="https://www.svgrepo.com/show/70469/loading.svg" alt="Loading icon" />
        </div>
      </div>
    </div>
  </section>

  <!--  Items with Delay && redirections  -->
  <script type="module">
    window.addEventListener("DOMContentLoaded", () => {
      const mainCard = document.getElementById("main-card");
      const intro = document.getElementById("omada-intro");
      const items = document.querySelectorAll(".omada-item");
      const summaryCarousel = document.getElementById("summary-carousel");
      const slides = document.querySelectorAll(".carousel-slide");
      const loader = document.getElementById("omada-loader");
  
      const cardInitialDelay = 100;
      const introDelay = 3000;
      const listDelayAfterIntro = 3000;
      const interval = 4000;
      const slideInterval = 4000;
      const redirectDelay = 60000;
      
      let currentSlide = 0;
      let prevSlide = -1;
      let carouselInterval;
      
      // Get the id parameter from the query string
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');
      
      // Base URL for redirection
      let redirectUrl = "https://preview.omada.site";
      if (id) {
        redirectUrl += `?id=${id}`;
      }

      // Function to check API response status
      async function checkApiStatus() {
        try {
          const response = await fetch("https://c5qbnzsykce4kddiacdhj2a7m40opkcx.lambda-url.us-west-1.on.aws/?id=" + id, {
            method: "GET",
            headers: {
              "Content-Type": "application/json"
            }
          });
          const data = await response.json();
          console.log("API Response:", data);
          
          if (data && data.processComplete) {
            window.location.href = redirectUrl;
          }
        } catch (error) {
          console.error("Error checking API status:", error);
        }
      }

      // Start polling immediately when page loads
      const pollInterval = setInterval(checkApiStatus, 3000);
      
      // Function to animate the slide transition
      function animateSlides(newIndex) {
        const oldIndex = prevSlide;
        
        // Reset all slides that aren't the current or previous one
        slides.forEach((slide, idx) => {
          if (idx !== newIndex && idx !== oldIndex) {
            slide.style.transform = "translateX(100%)";
            slide.style.opacity = "0";
            slide.style.transition = "none"; // Disable transitions for reset
          }
        });
        
        // Force browser reflow
        void summaryCarousel.offsetWidth;
        
        // If there's a previous slide, animate it out to the left
        if (oldIndex >= 0) {
          const oldSlide = slides[oldIndex];
          oldSlide.style.transition = "transform 1000ms ease-in-out, opacity 1000ms ease-in-out";
          oldSlide.style.transform = "translateX(-100%)";
          oldSlide.style.opacity = "0";
        }
        
        // Prepare the new slide
        const newSlide = slides[newIndex];
        // Start from right
        newSlide.style.transform = "translateX(100%)";
        newSlide.style.opacity = "1";
        newSlide.style.transition = "none";
        
        // Force browser reflow again
        void newSlide.offsetWidth;
        
        // Then bring it into view with animation
        requestAnimationFrame(() => {
          newSlide.style.transition = "transform 1000ms ease-in-out, opacity 1000ms ease-in-out";
          newSlide.style.transform = "translateX(0)";
        });
        
        // Update the carousel container height to fit the new slide
        const slideHeight = newSlide.offsetHeight;
        summaryCarousel.style.height = `${slideHeight}px`;
        
        // Update slide indices for next transition
        prevSlide = newIndex;
      }

      // Function to start the carousel
      function startCarousel() {
        // Set up the interval to rotate slides
        carouselInterval = setInterval(() => {
          currentSlide = (currentSlide + 1) % slides.length;
          animateSlides(currentSlide);
        }, slideInterval);
      }
  
      setTimeout(() => {
        mainCard.classList.add("opacity-100");
        mainCard.classList.remove("translate-x-10");

        // Show the first slide immediately
        slides[0].style.transform = "translateX(0)";
        slides[0].style.opacity = "1";
        summaryCarousel.classList.remove("hidden");

        setTimeout(() => {
          intro.classList.remove("hidden");
          setTimeout(() => {
            intro.classList.remove("opacity-0", "translate-x-10");
            intro.classList.add("opacity-100");
          }, 50);
  
          setTimeout(() => {
            let itemsDisplayed = 0;
            items.forEach((item, index) => {
              setTimeout(() => {
                item.classList.remove("hidden");
                setTimeout(() => {
                  item.classList.remove("translate-x-10", "opacity-0");
                  item.classList.add("opacity-100");
                  itemsDisplayed++;
                  
                  // Start carousel animation only after all items are displayed
                  if (itemsDisplayed === items.length) {
                    startCarousel();
                  }
                }, 50);
              }, index * interval);
            });
  
            const totalListTime = items.length * interval;
  
            setTimeout(() => {
              // Handle redirection after animations
              setTimeout(() => {
                window.location.href = redirectUrl;
              }, redirectDelay);
            }, totalListTime + 500);
  
          }, listDelayAfterIntro);
        }, introDelay);
      }, cardInitialDelay);
    });
  </script>
  
</body>

</html>